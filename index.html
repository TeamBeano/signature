<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src='bower_components/jquery/dist/jquery.js'></script>
    <script type="text/javascript" src='bower_components/mustache.js/mustache.js'></script>
    <script type="text/javascript">
      $(document).ready(function() {
        updatePreview()
      })
      $(document).on('change input', '.fields input', function() {
        updatePreview()
      })

      function updatePreview() {
        html = renderTemplate('#html_content', loadFormData())
        $('.output').text(html)
        $('.preview').html(html)
      }

      function loadFormData() {
        return {
          name: $('input.name').val(),
          role: $('input.role').val(),
          landline: $('input.landline').val(),
          mobile: $('input.mobile').val(),
          email: $('input.email').val()
        }
      }

      function renderTemplate(template, data) {
        var template = $(template).html();
        Mustache.parse(template);
        var rendered = Mustache.render(template, data);
        return rendered
      }

    </script>
  </head>
  <body>
    <form class="fields" action="#" method="get">
      <p>Name: <input type="text" class='name' value="Michelle Milner-Eradhun"></p>
      <p>Role: <input type="text" class='role' value="EA to Emma Scott and Beano Studios"></p>
      <p>Landline: <input type="text" class='landline' value="+44 (0) 207 400 1091"></p>
      <p>Mobile: <input type="text" class='mobile' value="+44 (0) 777 1234 567"></p>
      <p>Email: <input type="text" class='email' value="michelle.milner@beano.com"></p>
    </form>
    <hr>
    <div class="preview"></div>
    <p></p>
    <hr>
    <textarea name="name" class='output' rows="40" cols="100"></textarea>
  </body>
</html>

<script id="html_content" type="x-tmpl-mustache">

<style media="screen">
  body {
  	width: 100% !important;
  	-webkit-text-size-adjust: 100%;
  	-ms-text-size-adjust: 100%;
    line-height: 1.1em;
  }

  img {
  	outline: none;
  	text-decoration: none;
  	border: none;
  	-ms-interpolation-mode: bicubic;
  	max-width:100%;
  	height:auto;
  	display: block;
  }

  a{
    color: #6a6a6a;
    text-decoration: none;
  }

  table td {
  	border-collapse: collapse;
  	vertical-align:top;
  	font-family: Trebuchet MS1, Trebuchet MS, sans-serif;
  	font-size: 13px;
  	color: #6a6a6a;
  	text-align: left;
  }

  table {
  	border-collapse: collapse;
  	mso-table-lspace: 0pt;
  	mso-table-rspace: 0pt;
  }


  @media only screen and (max-width: 667px){
    td[class="wham"]{
      display:none;
    }
    td[class="small-wham"]{
      background-image: 'http://teambeano.github.io/signature/mobile-wham.jpg';
    }
    table{
      width: 100% !important;
    }
    td[class="column"], td[class="column1"]{
      display: block !important;
      width: 100% !important;
    }
    br[class="rwd-break"]{
      display: none;
    }
    span[class="rwd-comma"]{
      display: inline;
    }

    table[class='address']{
      border: none !important;
      border-top: 1px solid #d9d9d9 !important;
      border-bottom: 1px solid #d9d9d9 !important;
      margin: 0 0 10px  !important;

    }
    td[class='address-details']{
      padding: 15px 0;
    }

    td[class='spacer']{
      display:none;
    }

    img[class='beano']{
      margin: 15px 0;
    }
  }
</style>

<table class='main' border="0" cellpadding="0" cellspacing="0" style="border-bottom: 1px solid #d9d9d9;">
  <tr>
    <td width="236" class="wham">
      <table width="236" cellpadding="0" cellspacing="0" border="0" class="body_table">
          <tbody>
              <tr>
                <td>
                  <img src="http://teambeano.github.io/signature/desktop-wham.jpg" alt="" />
                </td>
              </tr>
          </tbody>
      </table>
    <td>
    <td>
      <table class='namerole' style="margin-bottom: 10px;" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td class="title" style="font-weight: bold; font-size: 18px; color: #000;">
            Michelle Milner-Eradhun
          <td>
        </tr>
        <tr>
          <td class="subtitle" style="color: #d84323;font-size: 14px;">
            EA to Emma Scott and Beano Studios
          </td>
        </tr>
      </table>

      <table border="0" class='details' cellpadding="0" cellspacing="0">
        <tr>
          <td class='column1' width="200">
            <table width="180" cellpadding="0" cellspacing="0" border="0" class="body_table">
                <tbody>
                    <tr>
                        <td>
                          +44 (0) 207 400 1091<br>
                          +44 (0) 777 1234 567<br>
                          michelle.milner@beano.com<br>
                          <a href='http://beano.com'>beano.com</a><br><br>

                          <table width='100%'>
                            <tr>
                              <td class='social'>
                                <a href='https://www.facebook.com/TheBeanoComic/'><img src='http://teambeano.github.io/signature/facebook.jpg'></a>
                              </td>
                              <td class='social'>
                                <a href='https://twitter.com/BeanoComic'><img src='http://teambeano.github.io/signature/twitter.jpg'></a>
                              </td>
                              <td class='social'>
                                <a href='https://www.instagram.com/thebeanocomic/'><img src='http://teambeano.github.io/signature/instagram.jpg'></a>
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td class='small-wham'>

                        </td>
                    </tr>
                </tbody>
            </table>

          </td>
          <td class='column' width="230">
            <table class='address' width="200" style="border-left: 1px solid #d9d9d9; border-right: 1px solid #d9d9d9;">
              <tr>
                <td class='spacer' width="50"></td>
                <td class='address-details'>
                  Beano Studios<span class='rwd-comma' style="display: none;">,</span><br class='rwd-break'>
                  185 Fleet Street<span class='rwd-comma' style="display: none;">,</span><br class='rwd-break'>
                  London<span class='rwd-comma' style="display: none;">,</span><br class='rwd-break'>
                  EC4A 2HS
                </td>
              </tr>
            </table>
          </td>
          <td class='column' width="150">
            <img src="http://teambeano.github.io/signature/beano.jpg" class='beano' alt="" />
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
</script>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src='bower_components/jquery/dist/jquery.js'></script>
    <script type="text/javascript" src='bower_components/mustache.js/mustache.js'></script>
    <script type="text/javascript">
      $(document).ready(function() {
        updatePreview()
      })
      $(document).on('change input', '.fields input', function() {
        updatePreview()
      })

      function updatePreview() {
        html = renderTemplate('#html_content', loadFormData())
        html = html.trim().replace(/\s{2,}/g, ' ')
        $('.output').text(html)
        $('.preview').html(html)
      }

      function loadFormData() {
        return {
          name: $('input.name').val(),
          role: $('input.role').val(),
          landline: $('input.landline').val(),
          mobile: $('input.mobile').val(),
          email: $('input.email').val(),
          address1: $('input.address1').val(),
          address2: $('input.address2').val(),
          address3: $('input.address3').val(),
          address4: $('input.address4').val(),
        }
      }

      function renderTemplate(template, data) {
        var template = $(template).html();
        Mustache.parse(template);
        var rendered = Mustache.render(template, data);
        return rendered
      }

    </script>
  </head>
  <body>
    <form class="fields" action="#" method="get">
      <p>Name: <input type="text" class='name' value="Michelle Milner-Eradhun"></p>
      <p>Role: <input type="text" class='role' value="EA to Emma Scott and Beano Studios"></p>
      <p>Landline: <input type="text" class='landline' value="+44 (0) 207 400 1091"></p>
      <p>Mobile: <input type="text" class='mobile' value="+44 (0) 777 1234 567"></p>
      <p>Email: <input type="text" class='email' value="michelle.milner@beano.com"></p>
      <p>Address 1: <input type="text" class='address1' value="Beano Studios"></p>
      <p>Address 2: <input type="text" class='address2' value="185 Fleet Street"></p>
      <p>Address 3: <input type="text" class='address3' value="London"></p>
      <p>Address 4: <input type="text" class='address4' value="EC4A 2HS"></p>
    </form>
    <hr>
    <div class="preview"></div>
    <p></p>
    <hr>
    <textarea name="name" class='output' rows="40" cols="100"></textarea>
  </body>
</html>

<script id="html_content" type="x-tmpl-mustache">
<style media="screen">
  body {
      width: 100% !important;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    line-height: 1.1em;
  }

  img {
      outline: none;
      text-decoration: none;
      border: none;
      -ms-interpolation-mode: bicubic;
      max-width:100%;
      height:auto;
      display: block;
  }

  a{
    color: #6a6a6a;
    text-decoration: none;
  }

  table td {
    vertical-align:top;
    font-family: Trebuchet MS1, Trebuchet MS, sans-serif;
    font-size: 13px;
    color: #6a6a6a;
    text-align: left;
  }

  table[class="main"]{
   min-width: 300px;
   max-width: 800px;
  }
  td[class="small-wham"]{
    width: 178px;
    height: 164px;
  }
  table{
    width: 100%;
  }

  td[class="body_table"]{
    display: block;
    width: 100%;
  }

  table[class='address']{
    display: block;
    width: 100%;
    border: none;
    border-top: 1px solid #d9d9d9;
    border-bottom: 1px solid #d9d9d9;
    margin: 0 0 10px ;
  }
  td[class='address-details']{
    padding: 15px 0;
  }
  img[class='beano']{
    margin: 15px 0;
  }
  table[class='namerole']{
    width: 100%;
    display: block;
  }
</style>

<table class="main" border="0" cellpadding="0" cellspacing="0" style="border-bottom: 1px solid #d9d9d9;min-width: 600px;">
  <tr>
    <td style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
      <table class="namerole" style="margin-bottom: 10px;" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td class="title" style="font-weight: bold;font-size: 18px;color: #000;vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;text-align: left;">
            {{name}}
          </td><td style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
        </td></tr>
        <tr>
          <td class="subtitle" style="color: #d84323;font-size: 14px;vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;text-align: left;">
            {{role}}
          </td>
        </tr>
      </table>

      <table align="left" width="600" border="0" class="details" cellpadding="0" cellspacing="0" style="">
        <tr>
          <td style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
            <table align="left" width="180" cellpadding="0" cellspacing="0" border="0" class="body_table" style="">
                <tbody>
                    <tr>
                        <td style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
                          {{landline}}<br>
                          {{mobile}}<br>
                          <a href="mailto:{{email}}" target="_blank" style="color: #6a6a6a;text-decoration: none;">{{email}}</a><br>
                          <a href="http://beano.com" style="color: #6a6a6a;text-decoration: none;">beano.com</a><br><br>

                          <table width="60" style="">
                            <tr>
                              <td class="social" style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
                                <a href="https://www.facebook.com/TheBeanoComic/" style="display:block; float:left; text-decoration: none;"><img src="http://teambeano.github.io/signature/facebook.jpg" style="outline: none;text-decoration: none;border: none;-ms-interpolation-mode: bicubic;max-width: 100%;height: auto;display: block;"></a>
                                <a href="https://twitter.com/BeanoComic" style="display:block; float:left;text-decoration: none;"><img src="http://teambeano.github.io/signature/twitter.jpg" style="outline: none;text-decoration: none;border: none;-ms-interpolation-mode: bicubic;max-width: 100%;height: auto;display: block;"></a>
                                <a href="https://www.instagram.com/thebeanocomic/" style="display:block; float:left;text-decoration: none;"><img src="http://teambeano.github.io/signature/instagram.jpg" style="outline: none;text-decoration: none;border: none;-ms-interpolation-mode: bicubic;max-width: 100%;height: auto;display: block;"></a>
                              </td>
                            </tr>
                          </table>
                        </td>
                        <td class="small-wham" style="">
                          <img src="http://teambeano.github.io/signature/wham.gif" alt="" style="outline: none;text-decoration: none;border: none;-ms-interpolation-mode: bicubic;max-width: 100%;height: auto;display: block;">
                        </td>
                    </tr>
                </tbody>
            </table>

            <table align="left" class="address" width="180">
              <tr>
                <td class="address-details" style="vertical-align: top;font-family: Trebuchet MS1, Trebuchet MS, sans-serif;font-size: 13px;color: #6a6a6a;text-align: left;">
                  {{address1}},
                  {{address2}},
                  {{address3}},
                  {{address4}}
                </td>
              </tr>
            </table>
            <table align="left" width="150" style="">
          <tr>
              <td class="column" width="150" style="">
                <a href="http://beano.com"><img src="http://teambeano.github.io/signature/beano-logo.gif" class="beano" alt="" style="outline: none;text-decoration: none;border: none;-ms-interpolation-mode: bicubic;max-width: 100%;height: auto;display: block;"></a>
              </td>
          </tr>
        </table>
        </td></tr>
      </table>
    </td>
  </tr>
</table>
</script>
